<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An R package that implements grammar of experimental design • edibble</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="An R package that implements grammar of experimental design">
<meta property="og:description" content="Bla bla">
<meta property="og:image" content="https://edibble.emitanaka.org/logo.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@emitanaka">
<meta name="twitter:site" content="@MonashEBS">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-7HJYKJBM5E"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-7HJYKJBM5E');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">edibble</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/edbl-output.html">Output configurations in edibble</a>
    </li>
    <li>
      <a href="articles/edbl-terms.html">Terminology in edibble</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/emitanaka/edibble/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="edibble-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#edibble-" class="anchor"></a>edibble <img src="reference/figures/logo.png" align="right" alt="" width="120">
</h1></div>
<!-- badges: start -->

<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install the development version with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># install.packages("remotes")</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>remotes<span class="op">::</span><span class="kw">install_github</span>(<span class="st">"emitanaka/edibble"</span>)</span></code></pre></div>
</div>
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>Software for constructing experimental design generally utilise: (1) functions that are specific for creating particular experimental designs (e.g. <code>agricolae::design.lsd()</code> creates a Latin Square Design) or (2) where it is general, requires an input (usually a data frame) with the initial experimental design structure (e.g. <code>AlgDesign::optBlock()</code> or most optimal designs). Both of these approaches assume that the user is well acquainted with the experimental structure and objective, but in practice these are the greatest bottleneck before even getting to think about the randomisation process.</p>
<p>💡 The big idea with the edibble R-package is that you specify an experimental design by being more expressive about the experiment. The edibble code for constructing experimental design should evoke a rough idea about the experimental layout even to a layperson.</p>
<p>🎯 The grand goal for the edibble project is to define the <em>grammar of experimental design</em> and implement it.</p>
<p>Take for an example, the classic split-plot design that contains 4 wholeplots with 4 sub plots within each wholeplot (so 16 subplots in total). There are 2 treatment factors: fertilizer (with levels A and B) and variety (with levels V1 and V2). Each level of the fertilizer is randomly applied to two wholeplots. Each level of variety is randomly applied to two subplots within each wholeplot.</p>
<p>In edibble, we can code the above split-plot design as below. You can see it outputs a data frame (or tibble) called edibble. The name origin of <code>edibble</code> is a play on <a href="https://tibble.tidyverse.org/"><code>tibble</code></a> and can be thought of as tibble output for experimental design.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://edibble.emitanaka.org/">edibble</a></span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">2020</span><span class="op">)</span> <span class="co"># 🔥🦠🏠😱</span>

<span class="va">spdes</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/start_design.html">start_design</a></span><span class="op">(</span><span class="st">"Split-plot Design"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/set_units.html">set_units</a></span><span class="op">(</span>wholeplot <span class="op">=</span> <span class="fl">4</span>,
            subplot <span class="op">=</span> <span class="fu"><a href="reference/nested_in.html">nested_in</a></span><span class="op">(</span><span class="va">wholeplot</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/set_trts.html">set_trts</a></span><span class="op">(</span>fertilizer <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>,
           variety    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"V1"</span>, <span class="st">"V2"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">allocate_trts</span><span class="op">(</span><span class="va">fertilizer</span> <span class="op">~</span> <span class="va">wholeplot</span>, 
                   <span class="va">variety</span> <span class="op">~</span> <span class="va">subplot</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/randomise_trts.html">randomise_trts</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Above object contains the intermediate construct of an experimental design (called <code>edbl_nexus</code>). When you are ready to serve your design, you can get the table output (called <code>edbl_df</code>) by using <code>serve_table</code> as below.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/serve_table.html">serve_table</a></span><span class="op">(</span><span class="va">spdes</span><span class="op">)</span>
<span class="co">#&gt; # An edibble: 16 x 4</span>
<span class="co">#&gt;    wholeplot  subplot    fertilizer variety </span>
<span class="co">#&gt;    &lt;unit(4)&gt;  &lt;unit(16)&gt; &lt;trt(2)&gt;   &lt;trt(2)&gt;</span>
<span class="co">#&gt;  1 wholeplot1 subplot1   A          V2      </span>
<span class="co">#&gt;  2 wholeplot1 subplot2   A          V2      </span>
<span class="co">#&gt;  3 wholeplot1 subplot3   A          V1      </span>
<span class="co">#&gt;  4 wholeplot1 subplot4   A          V1      </span>
<span class="co">#&gt;  5 wholeplot2 subplot5   B          V2      </span>
<span class="co">#&gt;  6 wholeplot2 subplot6   B          V1      </span>
<span class="co">#&gt;  7 wholeplot2 subplot7   B          V1      </span>
<span class="co">#&gt;  8 wholeplot2 subplot8   B          V2      </span>
<span class="co">#&gt;  9 wholeplot3 subplot9   A          V1      </span>
<span class="co">#&gt; 10 wholeplot3 subplot10  A          V2      </span>
<span class="co">#&gt; 11 wholeplot3 subplot11  A          V2      </span>
<span class="co">#&gt; 12 wholeplot3 subplot12  A          V1      </span>
<span class="co">#&gt; 13 wholeplot4 subplot13  B          V1      </span>
<span class="co">#&gt; 14 wholeplot4 subplot14  B          V2      </span>
<span class="co">#&gt; 15 wholeplot4 subplot15  B          V1      </span>
<span class="co">#&gt; 16 wholeplot4 subplot16  B          V2</span></code></pre></div>
<p>Once you get the rough idea of how edibble specifies design, you should be roughly be able to visualise what the experimental design layout is just from looking at the code alone. Take another example below. Can you see what the design is?</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rcbd</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/start_design.html">start_design</a></span><span class="op">(</span><span class="st">"RCBD"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/set_units.html">set_units</a></span><span class="op">(</span>block <span class="op">=</span> <span class="fl">4</span>,
            plot  <span class="op">=</span> <span class="fu"><a href="reference/nested_in.html">nested_in</a></span><span class="op">(</span><span class="va">block</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/set_trts.html">set_trts</a></span><span class="op">(</span>fertilizer <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>,
           variety    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"V1"</span>, <span class="st">"V2"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">allocate_trts</span><span class="op">(</span><span class="va">fertilizer</span><span class="op">:</span><span class="va">variety</span> <span class="op">~</span> <span class="va">plot</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/randomise_trts.html">randomise_trts</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>The above design is an example of a Randomised Complete Block Design. If you change the unit names from <code>block</code> to <code>wholeplot</code> and <code>plot</code> to <code>subplot</code>, it looks like the Split-plot Design, so what differs here aside from the unit names? Yes, the allocation of treatment is more restrictive in the Split-plot Design. This is one of the key benefits of using edibble to construct your experimental design; it makes you think about your experiment in bare terms.</p>
<p>If you have trouble understanding the layout, there are a number of considerations that are designed to help you to form a better understanding of what you have specified. I outline just a couple here with more details and explanations to come (writing takes a lot of time…).</p>
<p>You can see a high-level overview of the variables and its relation by using <code>plot</code> on the intermediate construct of the design.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">rcbd</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">spdes</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-high-view-1.png"><!-- --></p>
<p>If you want to see the connections in terms of the actual units, then you can change the view to a low-level view.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">rcbd</span>, view <span class="op">=</span> <span class="st">"low"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">spdes</span>, view <span class="op">=</span> <span class="st">"low"</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-low-view-1.png"><!-- --></p>
<p>The low-level view is often a bit cluttered so you may like to use the interactive version as below instead.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/subset-edbl-graph.html">subset_levels</a></span><span class="op">(</span><span class="va">rcbd</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/tkplot.html">tkplot</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>⚠️ Please note that edibble is currently fragile. That means that the code is likely to break when you deviate from example code. Even it it works, you should diagnose the output to make sure it did what you expected.</p>
</div>
<div id="related-work" class="section level2">
<h2 class="hasAnchor">
<a href="#related-work" class="anchor"></a>Related Work</h2>
<p>The way that edibble specifies experimental design is largely novel (if I say so myself).</p>
<ul>
<li>
<code>DeclareDesign</code> for survey or sampling designs</li>
<li>
<code>desplot</code> for visualising designs</li>
<li>
<code>designr</code> for balanced factorial designs with crossed and nested random and fixed effect to data frame</li>
<li>
<code>dae</code> for functions useful in the design and ANOVA of experiments (this is in fact powering the randomisation in edibble)</li>
<li>
<code>plotdesignr</code> for designing agronomic field experiments</li>
<li>
<code>ExploreModelMatrix</code> for exploring design matrix</li>
</ul>
</div>
<div id="code-of-conduct" class="section level2">
<h2 class="hasAnchor">
<a href="#code-of-conduct" class="anchor"></a>Code of Conduct</h2>
<p>Please note that the edibble project is released with a <a href="https://contributor-covenant.org/version/2/0/CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/emitanaka/edibble/">https://​github.com/​emitanaka/​edibble/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/emitanaka/edibble/issues">https://​github.com/​emitanaka/​edibble/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Emi Tanaka <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-1455-259X" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Emi Tanaka.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
